{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef, useCallback, useMemo } from 'react';\n// import PropTypes from 'prop-types';\n\nimport './styles.scss';\n\ninterface TyperProps {\n  sentences: string[];\n  startDelay?: number;\n  cursorDelay?: number;\n  className?: string;\n  cursorClassName?: string;\n  cursorColor?: string;\n  cursorBlinkSpeed?: number;\n  showCursor?: boolean;\n  hideCursorOnFinish?: boolean;\n  cursorSmooth?: boolean;\n  typingSpeed?: number;\n  deletingSpeed?: number;\n  pauseTime?: number;\n  loop?: boolean;\n  style?: React.CSSProperties;\n}\n\nconst Typer: React.FC<TyperProps> = ({\n  sentences,\n  startDelay = 0,\n  cursorDelay = startDelay,\n  className = '',\n  cursorClassName = '',\n  cursorColor = '',\n  cursorBlinkSpeed = 700,\n  showCursor = true,\n  hideCursorOnFinish = false,\n  cursorSmooth = false,\n  typingSpeed = 80,\n  deletingSpeed = 30,\n  pauseTime = 1000,\n  loop = true,\n  style = {},\n}: TyperProps) => {\n  const [text, setText] = useState('');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [loopNum, setLoopNum] = useState(0);\n  const [writingSpeed, setWritingSpeed] = useState(typingSpeed);\n  const mountedRef = useRef(false);\n\n  const refText = useRef(text);\n  const refIsDeleting = useRef(isDeleting);\n  const refLoopNum = useRef(loopNum);\n  const refWritingSpeed = useRef(writingSpeed);\n\n  const refTimer = useRef(0);\n  const timer1 = useRef(0);\n  const timer2 = useRef(0);\n  const timer3 = useRef(0);\n  const refIsGoingToDelete = useRef(false);\n  const refIsFinished = useRef(false);\n\n  clearTimeout(refTimer.current);\n\n  refText.current = text;\n  refIsDeleting.current = isDeleting;\n  refLoopNum.current = loopNum;\n  refWritingSpeed.current = writingSpeed;\n\n  useEffect(() => {\n    mountedRef.current = true;\n\n    return () => {\n      mountedRef.current = false;\n      clearTimeout(refTimer.current);\n      clearTimeout(timer1.current);\n      clearTimeout(timer2.current);\n      clearTimeout(timer3.current);\n    };\n  }, []);\n\n  const handleType = useCallback(() => {\n    const i = refLoopNum.current % sentences.length;\n    const fullText = sentences[i];\n\n    setText(\n      refIsDeleting.current\n        ? fullText.substring(0, refText.current.length - 1)\n        : fullText.substring(0, refText.current.length + 1)\n    );\n\n    if (!refIsDeleting.current && refText.current === fullText && !refIsGoingToDelete.current) {\n      refIsGoingToDelete.current = true;\n      timer1.current = setTimeout(() => {\n        setIsDeleting(true);\n        setWritingSpeed(deletingSpeed);\n        refIsGoingToDelete.current = false;\n      }, pauseTime);\n    } else if (refIsDeleting.current && refText.current === '') {\n      setIsDeleting(false);\n      setWritingSpeed(typingSpeed);\n      setLoopNum(refLoopNum.current + 1);\n    }\n\n    if (loop || i !== sentences.length - 1 || refText.current.length !== fullText.length) {\n      if (refIsGoingToDelete.current) {\n        timer2.current = setTimeout(() => {\n          refTimer.current = setTimeout(handleType, refWritingSpeed.current);\n        }, pauseTime);\n      } else {\n        refTimer.current = setTimeout(handleType, refWritingSpeed.current);\n      }\n    } else {\n      refIsFinished.current = true;\n    }\n  }, [deletingSpeed, loop, pauseTime, typingSpeed, sentences]);\n\n  useEffect(() => {\n    timer3.current = setTimeout(() => {\n      if (!mountedRef.current) {\n        return;\n      }\n      handleType();\n    }, startDelay);\n  }, [handleType, startDelay]);\n\n  const styledSpan = useMemo(\n    () => ({\n        opacity: 0,\n        visibility: showCursor ? 'visible' : 'hidden',\n        color: cursorColor,\n        animation: `blink ${cursorBlinkSpeed}ms ${cursorSmooth ? '' : 'steps(1)'} infinite`,\n        animationDelay: `${cursorDelay}ms`,\n      } as React.CSSProperties),\n      [cursorBlinkSpeed, cursorColor, cursorDelay, cursorSmooth, showCursor]\n  );\n\n  return (\n    <span style={style}>\n      <span className={className}>{text}</span>\n      {!(refIsFinished.current && hideCursorOnFinish) && (\n        <span\n          className={`typist-cursor ${`${cursorClassName} ${className}`}`}\n          style={styledSpan}\n        >\n          |\n        </span>\n      )}\n    </span>\n  );\n};\n\n/* Typer.propTypes = {\n  className: PropTypes.string, // so it is compatible with styled-components\n  cursorColor: PropTypes.string,\n  sentences: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  showCursor: PropTypes.bool,\n  typingSpeed: PropTypes.number,\n  deleteSpeed: PropTypes.number,\n  pauseTime: PropTypes.number,\n  loop: PropTypes.bool,\n};\n\nTyper.defaultProps = {\n  className: '',\n  cursorColor: '#000000',\n  showCursor: true,\n  typingSpeed: 80,\n  deleteSpeed: 30,\n  pauseTime: 2000,\n  loop: true,\n}; */\n\nexport default Typer;\n"],"names":["useState","useRef","useEffect","useCallback","useMemo","React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuBM,KAAK,GAAyB,UAAC,EAgBxB;QAfX,SAAS,eAAA,EACT,kBAAc,EAAd,UAAU,mBAAG,CAAC,KAAA,EACd,mBAAwB,EAAxB,WAAW,mBAAG,UAAU,KAAA,EACxB,iBAAc,EAAd,SAAS,mBAAG,EAAE,KAAA,EACd,uBAAoB,EAApB,eAAe,mBAAG,EAAE,KAAA,EACpB,mBAAgB,EAAhB,WAAW,mBAAG,EAAE,KAAA,EAChB,wBAAsB,EAAtB,gBAAgB,mBAAG,GAAG,KAAA,EACtB,kBAAiB,EAAjB,UAAU,mBAAG,IAAI,KAAA,EACjB,0BAA0B,EAA1B,kBAAkB,mBAAG,KAAK,KAAA,EAC1B,oBAAoB,EAApB,YAAY,mBAAG,KAAK,KAAA,EACpB,mBAAgB,EAAhB,WAAW,mBAAG,EAAE,KAAA,EAChB,qBAAkB,EAAlB,aAAa,mBAAG,EAAE,KAAA,EAClB,iBAAgB,EAAhB,SAAS,mBAAG,IAAI,KAAA,EAChB,YAAW,EAAX,IAAI,mBAAG,IAAI,KAAA,EACX,aAAU,EAAV,KAAK,mBAAG,EAAE,KAAA;IAEJ,IAAA,KAAkBA,cAAQ,CAAC,EAAE,CAAC,EAA7B,IAAI,QAAA,EAAE,OAAO,QAAgB,CAAC;IAC/B,IAAA,KAA8BA,cAAQ,CAAC,KAAK,CAAC,EAA5C,UAAU,QAAA,EAAE,aAAa,QAAmB,CAAC;IAC9C,IAAA,KAAwBA,cAAQ,CAAC,CAAC,CAAC,EAAlC,OAAO,QAAA,EAAE,UAAU,QAAe,CAAC;IACpC,IAAA,KAAkCA,cAAQ,CAAC,WAAW,CAAC,EAAtD,YAAY,QAAA,EAAE,eAAe,QAAyB,CAAC;IAC9D,IAAM,UAAU,GAAGC,YAAM,CAAC,KAAK,CAAC,CAAC;IAEjC,IAAM,OAAO,GAAGA,YAAM,CAAC,IAAI,CAAC,CAAC;IAC7B,IAAM,aAAa,GAAGA,YAAM,CAAC,UAAU,CAAC,CAAC;IACzC,IAAM,UAAU,GAAGA,YAAM,CAAC,OAAO,CAAC,CAAC;IACnC,IAAM,eAAe,GAAGA,YAAM,CAAC,YAAY,CAAC,CAAC;IAE7C,IAAM,QAAQ,GAAGA,YAAM,CAAC,CAAC,CAAC,CAAC;IAC3B,IAAM,MAAM,GAAGA,YAAM,CAAC,CAAC,CAAC,CAAC;IACzB,IAAM,MAAM,GAAGA,YAAM,CAAC,CAAC,CAAC,CAAC;IACzB,IAAM,MAAM,GAAGA,YAAM,CAAC,CAAC,CAAC,CAAC;IACzB,IAAM,kBAAkB,GAAGA,YAAM,CAAC,KAAK,CAAC,CAAC;IACzC,IAAM,aAAa,GAAGA,YAAM,CAAC,KAAK,CAAC,CAAC;IAEpC,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;IAE/B,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;IACvB,aAAa,CAAC,OAAO,GAAG,UAAU,CAAC;IACnC,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;IAC7B,eAAe,CAAC,OAAO,GAAG,YAAY,CAAC;IAEvCC,eAAS,CAAC;QACR,UAAU,CAAC,OAAO,GAAG,IAAI,CAAC;QAE1B,OAAO;YACL,UAAU,CAAC,OAAO,GAAG,KAAK,CAAC;YAC3B,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAC/B,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAC7B,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAC7B,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;SAC9B,CAAC;KACH,EAAE,EAAE,CAAC,CAAC;IAEP,IAAM,UAAU,GAAGC,iBAAW,CAAC;QAC7B,IAAM,CAAC,GAAG,UAAU,CAAC,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC;QAChD,IAAM,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;QAE9B,OAAO,CACL,aAAa,CAAC,OAAO;cACjB,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;cACjD,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CACtD,CAAC;QAEF,IAAI,CAAC,aAAa,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,KAAK,QAAQ,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE;YACzF,kBAAkB,CAAC,OAAO,GAAG,IAAI,CAAC;YAClC,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC;gBAC1B,aAAa,CAAC,IAAI,CAAC,CAAC;gBACpB,eAAe,CAAC,aAAa,CAAC,CAAC;gBAC/B,kBAAkB,CAAC,OAAO,GAAG,KAAK,CAAC;aACpC,EAAE,SAAS,CAAC,CAAC;SACf;aAAM,IAAI,aAAa,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,KAAK,EAAE,EAAE;YAC1D,aAAa,CAAC,KAAK,CAAC,CAAC;YACrB,eAAe,CAAC,WAAW,CAAC,CAAC;YAC7B,UAAU,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC;SACpC;QAED,IAAI,IAAI,IAAI,CAAC,KAAK,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,KAAK,QAAQ,CAAC,MAAM,EAAE;YACpF,IAAI,kBAAkB,CAAC,OAAO,EAAE;gBAC9B,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC;oBAC1B,QAAQ,CAAC,OAAO,GAAG,UAAU,CAAC,UAAU,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC;iBACpE,EAAE,SAAS,CAAC,CAAC;aACf;iBAAM;gBACL,QAAQ,CAAC,OAAO,GAAG,UAAU,CAAC,UAAU,EAAE,eAAe,CAAC,OAAO,CAAC,CAAC;aACpE;SACF;aAAM;YACL,aAAa,CAAC,OAAO,GAAG,IAAI,CAAC;SAC9B;KACF,EAAE,CAAC,aAAa,EAAE,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC,CAAC;IAE7DD,eAAS,CAAC;QACR,MAAM,CAAC,OAAO,GAAG,UAAU,CAAC;YAC1B,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;gBACvB,OAAO;aACR;YACD,UAAU,EAAE,CAAC;SACd,EAAE,UAAU,CAAC,CAAC;KAChB,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;IAE7B,IAAM,UAAU,GAAGE,aAAO,CACxB,cAAM,QAAC;QACH,OAAO,EAAE,CAAC;QACV,UAAU,EAAE,UAAU,GAAG,SAAS,GAAG,QAAQ;QAC7C,KAAK,EAAE,WAAW;QAClB,SAAS,EAAE,WAAS,gBAAgB,YAAM,YAAY,GAAG,EAAE,GAAG,UAAU,eAAW;QACnF,cAAc,EAAK,WAAW,OAAI;KACX,IAAA,EACzB,CAAC,gBAAgB,EAAE,WAAW,EAAE,WAAW,EAAE,YAAY,EAAE,UAAU,CAAC,CACzE,CAAC;IAEF,QACEC,kDAAM,KAAK,EAAE,KAAK;QAChBA,kDAAM,SAAS,EAAE,SAAS,IAAG,IAAI,CAAQ;QACxC,EAAE,aAAa,CAAC,OAAO,IAAI,kBAAkB,CAAC,KAC7CA,kDACE,SAAS,EAAE,oBAAoB,eAAe,SAAI,SAAW,CAAE,EAC/D,KAAK,EAAE,UAAU,QAGZ,CACR,CACI,EACP;AACJ;;;;"}